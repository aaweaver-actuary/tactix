Session summary (2026-02-10):
- Fixed Puppeteer practice orientation and best-move-hidden verification flows to use API-backed queue data and wait for enabled practice button.
- Added DuckDB tactic upsert dedupe by deleting existing tactics/outcomes for the same position_id to prevent duplicate opportunities on re-run.
- Added opp hanging piece regression test covering undefended capture target metadata, severity, created_at, and dedupe behavior.
- Regression verification (random 10): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_practice_best_move_hidden.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_game_detail_modal.js.
- Tests run: pytest tests/test_opp_hanging_piece_undefended.py (runTests tool did not detect unittest test).
- Screenshots: feature-practice-button-2026-02-10.png; feature-practice-orientation-2026-02-10.png; feature-practice-best-move-hidden-before-2026-02-10.png; feature-practice-best-move-hidden-after-2026-02-10.png; feature-fab-filters-open-desktop-2026-02-10.png; feature-fab-filters-closed-desktop-2026-02-10.png; feature-fab-filters-open-mobile-2026-02-10.png; feature-fab-filters-closed-mobile-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-open-lichess-link-2026-02-08.png; feature-listudy-assets-2026-02-08.png; feature-game-detail-modal-2026-02-08.png.
- Next steps: implement feature #84 (OPP_HANGING_PIECE favorable exchange) and add integration coverage.

Session summary (2026-02-10):
- Extracted ModalCloseButton to centralize modal close button styling and keep modal headers focused on layout.
- Before -> after map: inline BaseButton close controls in ChessboardModal/DatabaseModal/RecentGamesModal/RecentTacticsModal/GameDetailModal -> ModalCloseButton component with shared styling.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added practice board context animation hooks and reduced-motion styling for the practice modal layout.
- Regression verification (requested): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Manual verification: node verification/puppeteer_feature_practice_context_animation.js (feature-practice-context-animation-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_context_animation.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-practice-context-animation-2026-02-10.png.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added a FAB Browser action that opens the chessboard browser modal with the latest position when available.
- Fixed handler ordering in DashboardFlow to avoid a render-time temporal dead zone error after adding the Browser FAB action.
- Regression verification (requested): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Manual verification: node verification/puppeteer_feature_fab_browser_modal.js (feature-fab-browser-modal-open-2026-02-10.png, feature-fab-browser-modal-closed-2026-02-10.png).
- Integration verification: node verification/integration_feature_fab_browser_modal.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-fab-browser-modal-open-2026-02-10.png; feature-fab-browser-modal-closed-2026-02-10.png.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted a shared button click helper in the practice attempt card removal integration script to reduce duplicated button lookup logic.
- Before -> after map: integration_feature_remove_practice_attempt_card inline $$eval button text click blocks -> clickButtonByText helper.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added editable FEN controls with validation to the chessboard browser modal and covered update/error flows in unit tests.
- Regression verification (requested): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Manual verification: node verification/puppeteer_feature_browser_modal_edit_position.js (feature-browser-modal-edit-position-2026-02-10.png).
- Integration verification: node verification/integration_feature_browser_modal_edit_position.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted hero page setup and console error assertion helpers to keep hero screenshot verification focused and reduce mixed concerns.
- Before -> after map: puppeteer_feature_hero_redesign captureHeroScreenshot inline viewport/navigation/console checks -> openHeroPage + assertConsoleClean helpers.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted a shared HeroPanelHeader to remove duplicated panel heading markup and keep Hero focused on panel wiring.
- Before -> after map: Hero inline hero-panel-heading blocks -> HeroPanelHeader component used for pipeline/practice panels.
- Tests run: make check (before: exit 2); make check (after).

Session summary (2026-02-10):
- Moved the practice entry point into the hero header panel and removed the standalone practice card from the dashboard.
- Updated practice button automation to assert the hero placement.
- Regression verification (requested): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Manual verification: node verification/puppeteer_feature_practice_button.js (feature-practice-button-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_button.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Simplified game result formatting with a lookup map to keep the helper focused and reduce branching in DashboardFlow.
- Before -> after map: DashboardFlow formatGameResult nested result/userColor branching -> GAME_RESULT_LABELS_BY_COLOR lookup with fallback.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added a Go to Game button to recent games modal rows next to Open in Lichess, with disabled state when game ids are missing and accessible labels; added DashboardFlow tests for Go to Game + disabled state; updated game detail modal integration script to click Go to Game.
- Updated recent games puppeteer helpers to use the FAB modal and close filters before opening; updated listudy asset verification to look for chessboard modal assets; closed recent games modal after Open in Lichess verification.
- Regression verification (random 10): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_source_filter.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_recent_cards_fab.js.
- Manual verification: node verification/puppeteer_feature_recent_games_go_to_game.js (feature-recent-games-go-to-game-2026-02-10.png).
- Integration verification: node verification/integration_feature_game_detail_modal.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-fab-filters-open-desktop-2026-02-10.png; feature-fab-filters-closed-desktop-2026-02-10.png; feature-fab-filters-open-mobile-2026-02-10.png; feature-fab-filters-closed-mobile-2026-02-10.png; feature-game-detail-modal-2026-02-08.png; feature-source-filter-header-2026-02-10.png; feature-source-filter-modal-2026-02-10.png; feature-open-lichess-link-2026-02-08.png; feature-dashboard-cards-collapsible-move-2026-02-08.png; feature-listudy-assets-2026-02-08.png; feature-fab-recent-games-2026-02-10.png; feature-fab-recent-tactics-2026-02-10.png; feature-recent-games-go-to-game-2026-02-10.png.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Removed unused RecentGamesCard/RecentTacticsCard components after FAB modal move to satisfy knip deadcode checks.
- Tests run: make check.

Session summary (2026-02-10):
- Reused ModalHeader for recent games/tactics modals to keep modal chrome consistent and reduce duplicated header layout.
- Before -> after map: RecentGamesModal/RecentTacticsModal inline header rows -> ModalHeader with badge/close rightSlot.
- Adjusted DashboardFlow scoped motif test to open the recent tactics modal before asserting tactic row test ids.
- Tests run: make check (before and after changes; failing: pytest coverage 94.52% < 95); make test (failing: pytest coverage 94.52% < 95).

Session summary (2026-02-10):
- Extracted shared FiltersActionButton to keep FiltersCard modal open/close buttons consistent and reduce duplicated styling logic.
- Before -> after map: FiltersCard inline BaseButton for modal open/close -> FiltersActionButton component.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Reused ModalHeader for the Filters modal header to keep modal chrome consistent and reduce duplicated header markup.
- Before -> after map: FiltersCard inline filters modal header markup -> ModalHeader with rightSlot close button.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted practice scope reset into a shared helper to reduce duplicated session reset logic in DashboardFlow.
- Before -> after map: DashboardFlow handleSourceChange/handleIncludeFailedAttemptChange inline scope reset -> resetPracticeSessionScope helper.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Removed the practice queue card from the dashboard layout and kept the include-failed toggle in the Practice header so practice data stays accessible via the practice modal.
- Updated DashboardFlow tests to assert practice availability via the button/status and to confirm the practice queue card is absent.
- Added manual and integration puppeteer coverage for the removed practice queue card layout.
- Regression verification: node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Manual verification: node verification/puppeteer_feature_remove_practice_queue_card.js (feature-remove-practice-queue-card-2026-02-10.png).
- Integration verification: node verification/integration_feature_remove_practice_queue_card.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-10.png; feature-chessboard-modal-closed-2026-02-10.png; feature-remove-practice-queue-card-2026-02-10.png.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added new GitHub issues (#65-#51) to feature_list.json as top-priority items.
- Refreshed verification screenshots after regression batch and committed updated artifacts.

Session summary (2026-02-10):
- Extracted base metrics cards and source sync cards into dedicated components to keep MetricsSummaryGrid focused on layout.
- Before -> after map: MetricsSummaryGrid inline MetricCard blocks -> BaseMetricsCards + SourceSyncCards components in client/src/_components.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added MetricsSummaryCard unit tests covering empty/loading/populated states, labels/values, and optional source sync cards.
- Regression verification (random 13): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_practice_best_move_hidden.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_source_filter.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-practice-all-sources-2026-02-10.png; feature-practice-orientation-2026-02-10.png; feature-practice-best-move-hidden-before-2026-02-10.png; feature-practice-best-move-hidden-after-2026-02-10.png; feature-fab-filters-open-desktop-2026-02-10.png; feature-fab-filters-closed-desktop-2026-02-10.png; feature-fab-filters-open-mobile-2026-02-10.png; feature-fab-filters-closed-mobile-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-modal-escape-open-2026-02-09.png; feature-modal-escape-closed-2026-02-09.png; feature-open-lichess-link-2026-02-08.png; feature-listudy-assets-2026-02-08.png; feature-game-detail-modal-2026-02-08.png; feature-source-filter-header-2026-02-10.png; feature-source-filter-modal-2026-02-10.png.
- Tests run: vitest run client/src/_components/MetricsSummaryCard.test.tsx; make check.

Session summary (2026-02-10):
- Extracted shared ChessboardPanel wrapper to reuse board chrome between ChessboardModal and PracticeModalContent.
- Before -> after map: ChessboardModal/PracticeModalContent inline chessboard wrapper div -> ChessboardPanel component.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Regression verification (random 12): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_source_filter.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-practice-all-sources-2026-02-10.png; feature-practice-orientation-2026-02-10.png; feature-fab-filters-open-desktop-2026-02-10.png; feature-fab-filters-closed-desktop-2026-02-10.png; feature-fab-filters-open-mobile-2026-02-10.png; feature-fab-filters-closed-mobile-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-modal-escape-open-2026-02-09.png; feature-modal-escape-closed-2026-02-09.png; feature-open-lichess-link-2026-02-08.png; feature-listudy-assets-2026-02-08.png; feature-game-detail-modal-2026-02-08.png; feature-source-filter-header-2026-02-10.png; feature-source-filter-modal-2026-02-10.png.
- Added MetricsSummaryGrid unit tests covering empty/loading/populated states, labels/values, and layout.
- Tests run: make check; vitest run client/src/_components/MetricsSummaryGrid.test.tsx.

Session summary (2026-02-10):
- Added MotifCard unit tests covering default render, drag-handle variant, and header click/keyboard toggling.
- Regression verification (random 12): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_source_filter.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-practice-all-sources-2026-02-10.png; feature-practice-orientation-2026-02-10.png; feature-fab-filters-open-desktop-2026-02-10.png; feature-fab-filters-closed-desktop-2026-02-10.png; feature-fab-filters-open-mobile-2026-02-10.png; feature-fab-filters-closed-mobile-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-modal-escape-open-2026-02-09.png; feature-modal-escape-closed-2026-02-09.png; feature-open-lichess-link-2026-02-08.png; feature-dashboard-cards-collapsible-move-2026-02-08.png; feature-listudy-assets-2026-02-08.png; feature-game-detail-modal-2026-02-08.png; feature-source-filter-header-2026-02-10.png; feature-source-filter-modal-2026-02-10.png.
- Tests run: vitest run client/src/_components/MotifCard.test.tsx; make check.

Session summary (2026-02-10):
- Extracted time-trouble found-rate calculation into helpers for metrics summary rows to separate rate logic from row formatting and keep functions focused.
- Added unit coverage for the time-trouble found-rate helper.
- Before -> after map: duckdb_metrics_repository._build_time_trouble_row inline trouble/safe rate math -> _rate_found + _time_trouble_found_rate helper.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Shifted trend metrics to compute rolling 7/30-day windows (not per-game windows) and updated the motif trends badge to match.
- Ensured dashboard time control filter always lists standard controls and allowed motif/trend/time-trouble metrics to render when filters are set to all.
- Added MVP step-by-step manual + integration verification scripts; captured new screenshots for dashboard metrics and practice modal.
- Regression verification (random 12): node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_practice_best_move_hidden.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_settings_modal.js.
- Manual verification: node verification/puppeteer_feature_mvp_step_by_step.js (feature-mvp-step-dashboard-2026-02-10.png, feature-mvp-step-practice-2026-02-10.png).
- Integration verification: node verification/integration_feature_mvp_step_by_step.js.
- Tests run: make check.

Session summary (2026-02-10):
- Refactored Hero header layout to extract action buttons and backfill range into dedicated subcomponents and moved title selection into a helper to reduce mixed concerns while preserving test ids.
- Before -> after map: Hero inline buttons/backfill inputs -> HeroActions + BackfillRange; Hero inline title switch -> buildHeroTitle helper.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Moved the source selector out of the dashboard header and kept it in the filters modal; added a dashboard hero test id and updated the combined filters Puppeteer flow to open the modal first.
- Added manual and integration coverage for the source filter relocation.
- Regression verification (random 12): node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_recent_games_base_card.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_dashboard_combined_filters.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_practice_best_move_hidden.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_database_modal.js.
- Manual verification: node verification/puppeteer_feature_source_filter.js (feature-source-filter-header-2026-02-10.png, feature-source-filter-modal-2026-02-10.png).
- Integration verification: node verification/integration_feature_source_filter.js.
- Tests run: cd client && ./node_modules/.bin/vitest run src/App.stream.test.tsx; make check.

Session summary (2026-02-09):
- Introduced practice modal flow: PracticeAttemptCard now launches ChessboardModal practice view via new PracticeModalContent.
- Added practice schedule storage and spaced repetition adapters (FSRS/SM-2), plus practice queue scheduling and reschedule tracking.
- Updated practice verification scripts and added spaced repetition unit tests; adjusted practice queue/test expectations and joins.
- Manual verification: node verification/puppeteer_practice_attempt.js (dashboard-practice-attempt-grading.png).
- Integration verification: node verification/integration_issue_practice_progress.js.
- Tests run: make check.
Session summary (2026-02-10):
- Extracted hero redesign selectors/status evaluation into a shared helper for verification scripts.
- Before -> after map: inline hero selector/test-id checks in hero puppeteer scripts -> hero_redesign_helpers.js with waitForHero/getHeroStatus.
- Tests run: make check (before changes); make check (after changes).

Session summary (2026-02-09):
- Re-verified ChessboardModal, settings FAB modal, and scoped motif filters; refreshed verification screenshots.
- Tests run: make check.

Session summary (2026-02-10):
- Fixed regression coverage: ensured motif breakdown always includes scoped motifs (mate) and made drag handles consistently visible for dashboard card reordering.
- Added MotifTrendsCard unit tests (loading/empty/populated) and updated MetricsTrends to render BaseTable for empty/loading states with a stable data-testid wrapper.
- Regression verification (random 10): node verification/puppeteer_feature_mvp_step_by_step.js; node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_practice_all_sources.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_source_filter.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js.
- Screenshots: regression-mvp-step-dashboard-2026-02-10T06-37-38.png; regression-mvp-step-practice-2026-02-10T06-37-38.png; regression-puppeteer_feature_practice_button-2026-02-10T06-37-58.png; regression-puppeteer_feature_practice_all_sources-2026-02-10T06-37-58.png; regression-puppeteer_feature_practice_orientation-2026-02-10T06-37-58.png; regression-puppeteer_feature_settings_modal-2026-02-10T06-37-58.png; regression-puppeteer_feature_game_detail_modal-2026-02-10T06-37-58.png; regression-puppeteer_feature_chessboard_modal-2026-02-10T06-37-58.png; regression-puppeteer_feature_dashboard_cards_collapsible_move-2026-02-10T06-41-39.png; regression-puppeteer_feature_listudy_assets-2026-02-10T06-37-58.png; feature-source-filter-header-2026-02-10.png; feature-source-filter-modal-2026-02-10.png.
- Tests run: vitest run client/src/_components/MotifTrendsCard.test.tsx client/src/_components/MetricsTrends.test.tsx client/src/flows/DashboardFlow.test.tsx; make check.

Session summary (2026-02-09):
- Added ChessboardModal unit tests to cover closed state, empty state, and BaseChessboard wiring.
- Tests run: make check (before and after changes).

Session summary (2026-02-09):
- Added Escape key handling to ModalShell so BaseModal-backed views close on Escape, plus a dashboard flow test to cover it.
- Added manual Puppeteer verification + integration coverage for Escape-to-close behavior with new screenshots.
- Tests run: node verification/puppeteer_feature_modal_escape.js; node verification/integration_feature_modal_escape.js; make check.

Session summary (2026-02-09):
- Added BaseButton and replaced all raw button tags across client components/tests; added pytest to forbid raw <button> outside BaseButton.
- Stabilized practice session progress by initializing totals once and keeping feedback visible after queue refresh; updated filters modal helper to wait for enabled open button.
- Tests run: node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_issue_practice_progress.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_110_dashboard.js; node verification/puppeteer_feature_107_positions.js; make check.

Session summary (2026-02-09):
- Note: user requested that we record they never said the authorization prompt; proceeding with review/commit per their instruction.

Session summary (2026-02-10):
- Removed the dashboard filters card while keeping filter access via the FAB settings entry; rendered filters modal standalone.
- Updated settings modal automation to assert the filters card is gone and refreshed screenshots.
- Manual verification: node verification/puppeteer_feature_settings_modal.js (feature-fab-filters-open-desktop-2026-02-10.png, feature-fab-filters-closed-desktop-2026-02-10.png, feature-fab-filters-open-mobile-2026-02-10.png, feature-fab-filters-closed-mobile-2026-02-10.png).
- Integration verification: node verification/integration_feature_settings_modal.js.
- Tests run: make check (before and after changes).
- Reviewed staged hanging-target metadata and pipeline view updates; `make check` green.

Session summary (2026-02-09):
- Scoped tactics to hanging piece + mate in 1 across dashboard, metrics, practice queue, and Postgres analysis reads; added motif scope tests and integration verification script.
- Manual verification: puppeteer motif filters screenshot saved.
- Tests run: make check; node verification/puppeteer_motif_filters.js (TACTIX_SCREENSHOT_NAME=feature-scope-motifs-2026-02-09.png); node verification/integration_feature_scope_motifs.js.

Session summary (2026-02-09):
- Applied scoped-motif filtering in dashboard/practice UI and aligned client/test expectations; refreshed verification artifacts.
- Tests run: make check.

Session summary (2026-02-09):
- Removed initiative motif handling from backend classification/inference paths and scope constants; added test coverage to assert initiative is no longer scoped.
- Added manual and integration verification scripts for initiative removal with pipeline checks; captured UI screenshot.
- Tests run: node verification/puppeteer_feature_remove_initiative.js; node verification/integration_feature_remove_initiative.js; make check.

Session summary (2026-02-09):
- Extracted motif-scoping helpers from DashboardFlow into a shared client utility for reuse.
- Before -> after map: DashboardFlow ALLOWED_MOTIFS/isScopedMotif -> client utils/motifScope isScopedMotif/isAllowedMotifFilter; DashboardFlow scoped filters now use helper.
- Tests run: make check.

Session summary (2026-02-09):
- Note: user requested that we record they never said the authorization prompt; proceeding with review/commit per their instruction.

Session summary (2026-02-10):
- Added BaseChessboard with shared listudy styling, wired ChessboardModal and PracticeAttemptCard to use it, and added unit test coverage.
- Updated chessboard modal integration script to assert listudy board styling; removed unused motif export to satisfy dead-code checks.
- Manual verification: puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Tests run: node verification/puppeteer_feature_chessboard_modal.js; node verification/integration_feature_chessboard_modal.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_issue_practice_progress.js; make check (initial run failed due to DuckDB lock, rerun passed).

Session summary (2026-02-10):
- Fixed practice queue advancement after correct attempts by filtering completed tactics in the UI and ensuring due dates advance past the current day.
- Added practice queue advance coverage (manual + integration).
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (regression-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (regression-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (regression-chessboard-modal-open-2026-02-10.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_issue_practice_advance_correct.js (issue-practice-advance-correct-2026-02-10.png).
- Integration verification: node verification/integration_issue_practice_advance_correct.js.
- Tests run: make check (before/after changes).

Session summary (2026-02-09):
- Added regression coverage to filter non-scoped motifs (including initiative) from dashboard metrics, tactics, and practice queue, plus motif scope utility tests.
- Tests run: make check (before and after changes).

Session summary (2026-02-09):
- Resolved DashboardFlow hook dependency warnings by memoizing source/failure handlers and trimming unused deps.
- Manual verification: node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Integration verification: node verification/integration_feature_chessboard_modal.js.
- Tests run: runTests (132 tests); make check (pre-change failed on eslint hook warnings; post-change passed).

Session summary (2026-02-09):
- Added FloatingActionButton component and moved filters modal entry into the FAB while keeping modal behavior intact; updated dashboard tests and helpers.
- Manual verification: node verification/puppeteer_feature_settings_modal.js (feature-fab-filters-open-desktop-2026-02-09.png, feature-fab-filters-closed-desktop-2026-02-09.png, feature-fab-filters-open-mobile-2026-02-09.png, feature-fab-filters-closed-mobile-2026-02-09.png).
- Integration verification: node verification/integration_feature_settings_modal.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Fixed practice queue all-sources filtering by removing the default source fallback and returning "all" in practice queue payloads.
- Kept practice feedback visible after queue refresh and made practice attempt verification case-insensitive for best-move text.
- Added all-sources practice availability automation (manual + integration).
- Regression verification (random 12): node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_feature_practice_best_move_hidden.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_remove_initiative.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_game_detail_modal.js.
- Manual verification: node verification/puppeteer_practice_attempt.js (dashboard-practice-attempt-grading.png); node verification/puppeteer_feature_practice_all_sources.js (feature-practice-all-sources-2026-02-10.png).
- Integration verification: node verification/integration_issue_practice_progress.js; node verification/integration_feature_practice_all_sources.js.
- Tests run: make check.
- Completion status: 51/146 tests passing.

Session summary (2026-02-09):
- Re-enabled mypy override errors by typing BaseTacticDetector.detect with TacticContext and fixed resulting override violations.
- Evidence: .venv/bin/mypy src/ clean after change; make check green.
- Remaining mypy error types to re-enable: arg-type, attr-defined, call-overload, import-untyped, operator, typeddict-item, valid-type.
- Tests run: .venv/bin/mypy src/; make check; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_issue_practice_progress.js.

Session summary (2026-02-10):
- Extracted the filters form UI from FiltersCard into a dedicated FiltersForm component to separate modal/card chrome from filter field logic.
- Before -> after map: FiltersCard inline filtersBody -> FiltersForm component rendered inside FiltersCard modal.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Consolidated Postgres dashboard cards into a new Database modal accessed from the FAB; removed Postgres cards/error banners from the dashboard layout.
- Added DatabaseModal and updated Postgres card components to support non-collapsible modal rendering.
- Stabilized verification helpers to close filters when no source change and to open practice modal for Enter-submit checks.
- Manual verification: node verification/puppeteer_feature_database_modal.js (feature-fab-database-modal-2026-02-10.png). Regression re-runs: puppeteer_feature_settings_modal.js, puppeteer_feature_modal_escape.js, puppeteer_feature_chessboard_modal.js, puppeteer_feature_game_detail_modal.js, puppeteer_feature_open_lichess_link.js, puppeteer_feature_dashboard_cards_collapsible_move.js, puppeteer_feature_listudy_assets.js, puppeteer_motif_filters.js, puppeteer_practice_attempt.js, puppeteer_issue_enter_submit.js.
- Integration verification: node verification/integration_feature_database_modal.js.
- Tests run: make check.

Session summary (2026-02-10):
- Added GitHub issues #46-#49 to feature_list.json as new top-priority work items.

Session summary (2026-02-10):
- Added a dedicated practice action button in the dashboard header with availability messaging and accessibility hints; wired it to the practice modal.
- Added dashboard flow tests for the practice button enabled/disabled states and modal launch behavior.
- Manual verification: node verification/puppeteer_feature_practice_button.js (feature-practice-button-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_button.js.
- Regression verification: node verification/puppeteer_feature_settings_modal.js, node verification/puppeteer_feature_database_modal.js, node verification/puppeteer_feature_chessboard_modal.js, node verification/puppeteer_feature_modal_escape.js, node verification/puppeteer_feature_game_detail_modal.js, node verification/puppeteer_feature_open_lichess_link.js, node verification/puppeteer_feature_dashboard_cards_collapsible_move.js, node verification/puppeteer_feature_listudy_assets.js, node verification/puppeteer_motif_filters.js, node verification/puppeteer_practice_attempt.js, node verification/puppeteer_issue_enter_submit.js, node verification/puppeteer_issue_practice_progress.js.
- Tests run: make lint; cd client && ./node_modules/.bin/vitest run src/flows/DashboardFlow.test.tsx; make check (fails: pytest coverage 94.55% and tests/test_api_stats_motifs.py::test_stats_motifs_returns_schema).

Session summary (2026-02-10):
- Fixed practice board orientation stability by locking practice orientation to the current practice FEN (avoids post-move flip).
- Updated practice orientation manual + integration automation to submit a correct move, confirm orientation stability, and verify move highlights.
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (feature-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (feature-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_feature_practice_orientation.js (feature-practice-orientation-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_orientation.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted practice button status resolution into dedicated helpers to simplify DashboardFlow state derivation.
- Before -> after map: DashboardFlow inline practiceButtonState useMemo -> buildPracticeButtonState helpers (PRACTICE_* constants + createPractice* helpers).
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Practice modal board orientation now derives from the active FEN to keep side-to-move at the bottom.
- Updated game detail modal Puppeteer script to click rows directly; added practice orientation Puppeteer + integration verification scripts.
- Manual verification: node verification/puppeteer_feature_practice_orientation.js (feature-practice-orientation-2026-02-10.png); node verification/puppeteer_practice_attempt.js (dashboard-practice-attempt-grading.png); node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png); node verification/puppeteer_feature_game_detail_modal.js (feature-game-detail-modal-2026-02-08.png); regression re-runs for puppeteer_feature_listudy_assets.js, puppeteer_feature_dashboard_cards_collapsible_move.js, puppeteer_feature_settings_modal.js, puppeteer_feature_database_modal.js, puppeteer_feature_modal_escape.js, puppeteer_feature_open_lichess_link.js, puppeteer_feature_practice_button.js, puppeteer_feature_remove_initiative.js.
- Integration verification: node verification/integration_feature_practice_orientation.js.
- Tests run: make check.

Session summary (2026-02-10):
- Extracted practice move parsing/building into a shared utility for reuse across practice handlers.
- Before -> after map: DashboardFlow inline buildPracticeMove helper -> utils/buildPracticeMove helper + unit tests.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Regression verification (random 12): node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_practice_orientation.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_remove_initiative.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_listudy_assets.js. Note: puppeteer_feature_scope_motifs.js does not exist (only integration script available).
- Hid the practice modal best-move badge until after an attempt; added best-move test id for automation and updated practice attempt script to avoid pre-attempt best lookup.
- Manual verification: node verification/puppeteer_feature_practice_best_move_hidden.js (feature-practice-best-move-hidden-before-2026-02-10.png, feature-practice-best-move-hidden-after-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_best_move_hidden.js.
- Tests run: make check (initially failed js-deadcode, fixed and reran).

Session summary (2026-02-10):
- Extracted modal header layout into a shared ModalHeader component to reduce duplication between ChessboardModal and PracticeModalContent.
- Before -> after map: ChessboardModal/PracticeModalContent inline header rows -> ModalHeader component with title/description/rightSlot wiring.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted practice session reschedule updates into a shared helper for practice feedback handling.
- Before -> after map: DashboardFlow inline practice session reschedule logic -> utils/practiceSession applyPracticeAttemptResult; DashboardFlow now uses helper during practice feedback submission.
- Tests run: make check (before changes); make check (after changes; initial jslint warnings fixed and reran).

Session summary (2026-02-10):
- Extracted BaseCard drag handle rendering into a focused helper to separate drag UI from card collapse logic.
- Before -> after map: BaseCard inline drag handle button/class logic -> BaseCardDragHandle + buildDragHandleClasses helper.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted MotifCard header markup into MotifCardHeader to keep card wiring separate from header presentation.
- Before -> after map: MotifCard inline header JSX -> MotifCardHeader component used by MotifCard.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Redesigned the dashboard hero card with a modern split layout, new styling tokens, gradient background accents, and entrance motion while preserving all existing controls and test IDs.
- Added hero redesign manual + integration automation coverage.
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (feature-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (feature-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_feature_hero_redesign.js (feature-hero-redesign-desktop-2026-02-10.png, feature-hero-redesign-mobile-2026-02-10.png).
- Integration verification: node verification/integration_feature_hero_redesign.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added Recent tactics action buttons for Go to Game and Open in Lichess, with disabled states when game ids are missing.
- Added unit coverage for recent tactics actions (Go to Game, Open in Lichess, disabled state).
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (regression-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (regression-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (regression-chessboard-modal-open-2026-02-10.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_feature_recent_tactics_actions.js (feature-recent-tactics-actions-2026-02-10.png).
- Integration verification: node verification/integration_feature_recent_tactics_actions.js.
- Tests run: make check.

Session summary (2026-02-10):
- Extracted recent tactics action rendering into TacticsActionButtons to keep DashboardFlow focused on orchestration.
- Before -> after map: DashboardFlow tactics-actions cell inline buttons -> TacticsActionButtons component with intent callbacks.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Moved recent games/tactics cards into FAB-driven modals with new modal components and removed their dashboard cards.
- Updated dashboard tests to open FAB modals and confirm cards are removed.
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (regression-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (regression-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (regression-chessboard-modal-open-2026-02-10.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_feature_recent_cards_fab.js (feature-fab-recent-games-2026-02-10.png, feature-fab-recent-tactics-2026-02-10.png).
- Integration verification: node verification/integration_feature_recent_cards_fab.js.
- Tests run: make check (before and after changes).
Session summary (2026-02-10):
- Extracted motif breakdown default row construction into a helper to keep DashboardFlow orchestration focused.                              - Before -> after map: DashboardFlow ensureMotifBreakdownDefaults inline defaults -> buildMotifBreakdownDefaults helper.                     - Updated the practice loading test to assert the practice button label.                                                                      - Removed unused PracticeQueueCard component flagged by knip.                                                                               - Tests run: make check (before changes failed: DashboardFlow practice loading test); make check (after changes exits 2 with safety check reporting ignored vulnerabilities; otherwise green).

Session summary (2026-02-10):
- Removed the practice attempt card from the dashboard card stack and kept spacing/order consistent.
- Updated practice automation helpers and scripts to open the practice modal from the hero button.
- Regression verification (requested features): node verification/puppeteer_feature_practice_button.js (regression-practice-button-2026-02-10.png); node verification/puppeteer_feature_database_modal.js (regression-fab-database-modal-2026-02-10.png); node verification/puppeteer_feature_chessboard_modal.js (regression-chessboard-modal-open-2026-02-10.png, feature-chessboard-modal-closed-2026-02-09.png).
- Manual verification: node verification/puppeteer_feature_remove_practice_attempt_card.js (feature-remove-practice-attempt-card-2026-02-10.png).
- Integration verification: node verification/integration_feature_remove_practice_attempt_card.js.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted a shared clickButtonByText helper for verification scripts to keep button targeting consistent and reduce duplication.
- Before -> after map: inline clickButtonByText functions in puppeteer_feature_021_chesscom_pagination, puppeteer_feature_045_chesscom_blitz_backfill, puppeteer_feature_052_chesscom_correspondence_backfill, integration_feature_remove_practice_attempt_card -> helpers/button_helpers clickButtonByText with shared imports.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Extracted a shared practice-ready wait helper to reduce duplication in verification scripts and keep orchestration focused.
- Before -> after map: inline waitForPracticeReady in puppeteer_feature_remove_practice_attempt_card and integration_feature_remove_practice_attempt_card -> enter_submit_helpers waitForPracticeReady + updated call sites.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Fixed unclear practice puzzles by filtering practice queue items without a best move.
- Added practice queue coverage to ensure best move labels are present (manual + integration).
- Manual verification: node verification/puppeteer_feature_unclear_tactical_puzzle.js (feature-unclear-tactical-puzzle-2026-02-10.png).
- Integration verification: node verification/integration_feature_unclear_tactical_puzzle.js.
- Regression verification (requested): node verification/puppeteer_feature_practice_button.js; node verification/puppeteer_feature_database_modal.js; node verification/puppeteer_feature_chessboard_modal.js.
- Screenshots: feature-practice-button-2026-02-10.png; feature-fab-database-modal-2026-02-10.png; feature-chessboard-modal-open-2026-02-09.png; feature-chessboard-modal-closed-2026-02-09.png; feature-unclear-tactical-puzzle-2026-02-10.png.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Addressed make check failures by removing BaseChart from shared exports, closing TestClient in stats tests to release DuckDB locks, and adding unit tests for config/profile helpers.
- Added coverage for split_pgn_chunks and Settings helper behavior to reach the 95% coverage gate.
- Tests run: make check (green).
Session summary (2026-02-10):
- Extracted the tactic upsert workflow into single-responsibility helpers and added an idempotent upsert unit test for position cleanup.
- Before -> after map: DuckDbTacticRepository.upsert_tactic_with_outcome inline delete/insert/outcome -> _require_position_id/_delete_existing_for_position_if_needed/_insert_single_tactic/_insert_outcome_for_tactic.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Added simple exchange evaluation for hanging piece detection and applied a hanging piece severity floor for medium confidence.
- Added integration-style unittest coverage for exchange-based OPP_HANGING_PIECE targets.
- Manual verification: tmp-logs/opp_hanging_exchange_manual.py -> tmp-logs/opp_hanging_exchange_manual.json.
- Tests attempted: runTests (multiple files) returned "No tests found"; no CI tests executed.
- Screenshots: n/a (backend-only feature).
- Next steps: investigate runTests discovery for unittest suites; consider UI-level verification entry point if needed.
