Session summary (2026-02-09):
- Introduced practice modal flow: PracticeAttemptCard now launches ChessboardModal practice view via new PracticeModalContent.
- Added practice schedule storage and spaced repetition adapters (FSRS/SM-2), plus practice queue scheduling and reschedule tracking.
- Updated practice verification scripts and added spaced repetition unit tests; adjusted practice queue/test expectations and joins.
- Manual verification: node verification/puppeteer_practice_attempt.js (dashboard-practice-attempt-grading.png).
- Integration verification: node verification/integration_issue_practice_progress.js.
- Tests run: make check.

Session summary (2026-02-09):
- Re-verified ChessboardModal, settings FAB modal, and scoped motif filters; refreshed verification screenshots.
- Tests run: make check.

Session summary (2026-02-09):
- Added ChessboardModal unit tests to cover closed state, empty state, and BaseChessboard wiring.
- Tests run: make check (before and after changes).

Session summary (2026-02-09):
- Added Escape key handling to ModalShell so BaseModal-backed views close on Escape, plus a dashboard flow test to cover it.
- Added manual Puppeteer verification + integration coverage for Escape-to-close behavior with new screenshots.
- Tests run: node verification/puppeteer_feature_modal_escape.js; node verification/integration_feature_modal_escape.js; make check.

Session summary (2026-02-09):
- Added BaseButton and replaced all raw button tags across client components/tests; added pytest to forbid raw <button> outside BaseButton.
- Stabilized practice session progress by initializing totals once and keeping feedback visible after queue refresh; updated filters modal helper to wait for enabled open button.
- Tests run: node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_issue_practice_progress.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_feature_110_dashboard.js; node verification/puppeteer_feature_107_positions.js; make check.

Session summary (2026-02-09):
- Note: user requested that we record they never said the authorization prompt; proceeding with review/commit per their instruction.

Session summary (2026-02-10):
- Removed the dashboard filters card while keeping filter access via the FAB settings entry; rendered filters modal standalone.
- Updated settings modal automation to assert the filters card is gone and refreshed screenshots.
- Manual verification: node verification/puppeteer_feature_settings_modal.js (feature-fab-filters-open-desktop-2026-02-10.png, feature-fab-filters-closed-desktop-2026-02-10.png, feature-fab-filters-open-mobile-2026-02-10.png, feature-fab-filters-closed-mobile-2026-02-10.png).
- Integration verification: node verification/integration_feature_settings_modal.js.
- Tests run: make check (before and after changes).
- Reviewed staged hanging-target metadata and pipeline view updates; `make check` green.

Session summary (2026-02-09):
- Scoped tactics to hanging piece + mate in 1 across dashboard, metrics, practice queue, and Postgres analysis reads; added motif scope tests and integration verification script.
- Manual verification: puppeteer motif filters screenshot saved.
- Tests run: make check; node verification/puppeteer_motif_filters.js (TACTIX_SCREENSHOT_NAME=feature-scope-motifs-2026-02-09.png); node verification/integration_feature_scope_motifs.js.

Session summary (2026-02-09):
- Applied scoped-motif filtering in dashboard/practice UI and aligned client/test expectations; refreshed verification artifacts.
- Tests run: make check.

Session summary (2026-02-09):
- Removed initiative motif handling from backend classification/inference paths and scope constants; added test coverage to assert initiative is no longer scoped.
- Added manual and integration verification scripts for initiative removal with pipeline checks; captured UI screenshot.
- Tests run: node verification/puppeteer_feature_remove_initiative.js; node verification/integration_feature_remove_initiative.js; make check.

Session summary (2026-02-09):
- Extracted motif-scoping helpers from DashboardFlow into a shared client utility for reuse.
- Before -> after map: DashboardFlow ALLOWED_MOTIFS/isScopedMotif -> client utils/motifScope isScopedMotif/isAllowedMotifFilter; DashboardFlow scoped filters now use helper.
- Tests run: make check.

Session summary (2026-02-09):
- Note: user requested that we record they never said the authorization prompt; proceeding with review/commit per their instruction.

Session summary (2026-02-10):
- Added BaseChessboard with shared listudy styling, wired ChessboardModal and PracticeAttemptCard to use it, and added unit test coverage.
- Updated chessboard modal integration script to assert listudy board styling; removed unused motif export to satisfy dead-code checks.
- Manual verification: puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Tests run: node verification/puppeteer_feature_chessboard_modal.js; node verification/integration_feature_chessboard_modal.js; node verification/puppeteer_feature_game_detail_modal.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_issue_practice_progress.js; make check (initial run failed due to DuckDB lock, rerun passed).

Session summary (2026-02-09):
- Added regression coverage to filter non-scoped motifs (including initiative) from dashboard metrics, tactics, and practice queue, plus motif scope utility tests.
- Tests run: make check (before and after changes).

Session summary (2026-02-09):
- Resolved DashboardFlow hook dependency warnings by memoizing source/failure handlers and trimming unused deps.
- Manual verification: node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png).
- Integration verification: node verification/integration_feature_chessboard_modal.js.
- Tests run: runTests (132 tests); make check (pre-change failed on eslint hook warnings; post-change passed).

Session summary (2026-02-09):
- Added FloatingActionButton component and moved filters modal entry into the FAB while keeping modal behavior intact; updated dashboard tests and helpers.
- Manual verification: node verification/puppeteer_feature_settings_modal.js (feature-fab-filters-open-desktop-2026-02-09.png, feature-fab-filters-closed-desktop-2026-02-09.png, feature-fab-filters-open-mobile-2026-02-09.png, feature-fab-filters-closed-mobile-2026-02-09.png).
- Integration verification: node verification/integration_feature_settings_modal.js.
- Tests run: make check (before and after changes).
- Completion status: 51/146 tests passing.

Session summary (2026-02-09):
- Re-enabled mypy override errors by typing BaseTacticDetector.detect with TacticContext and fixed resulting override violations.
- Evidence: .venv/bin/mypy src/ clean after change; make check green.
- Remaining mypy error types to re-enable: arg-type, attr-defined, call-overload, import-untyped, operator, typeddict-item, valid-type.
- Tests run: .venv/bin/mypy src/; make check; node verification/puppeteer_feature_modal_escape.js; node verification/puppeteer_feature_settings_modal.js; node verification/puppeteer_feature_chessboard_modal.js; node verification/puppeteer_feature_open_lichess_link.js; node verification/puppeteer_feature_dashboard_cards_collapsible_move.js; node verification/puppeteer_feature_listudy_assets.js; node verification/puppeteer_motif_filters.js; node verification/puppeteer_practice_attempt.js; node verification/puppeteer_issue_enter_submit.js; node verification/puppeteer_issue_practice_progress.js.

Session summary (2026-02-10):
- Extracted the filters form UI from FiltersCard into a dedicated FiltersForm component to separate modal/card chrome from filter field logic.
- Before -> after map: FiltersCard inline filtersBody -> FiltersForm component rendered inside FiltersCard modal.
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Consolidated Postgres dashboard cards into a new Database modal accessed from the FAB; removed Postgres cards/error banners from the dashboard layout.
- Added DatabaseModal and updated Postgres card components to support non-collapsible modal rendering.
- Stabilized verification helpers to close filters when no source change and to open practice modal for Enter-submit checks.
- Manual verification: node verification/puppeteer_feature_database_modal.js (feature-fab-database-modal-2026-02-10.png). Regression re-runs: puppeteer_feature_settings_modal.js, puppeteer_feature_modal_escape.js, puppeteer_feature_chessboard_modal.js, puppeteer_feature_game_detail_modal.js, puppeteer_feature_open_lichess_link.js, puppeteer_feature_dashboard_cards_collapsible_move.js, puppeteer_feature_listudy_assets.js, puppeteer_motif_filters.js, puppeteer_practice_attempt.js, puppeteer_issue_enter_submit.js.
- Integration verification: node verification/integration_feature_database_modal.js.
- Tests run: make check.

Session summary (2026-02-10):
- Added GitHub issues #46-#49 to feature_list.json as new top-priority work items.

Session summary (2026-02-10):
- Added a dedicated practice action button in the dashboard header with availability messaging and accessibility hints; wired it to the practice modal.
- Added dashboard flow tests for the practice button enabled/disabled states and modal launch behavior.
- Manual verification: node verification/puppeteer_feature_practice_button.js (feature-practice-button-2026-02-10.png).
- Integration verification: node verification/integration_feature_practice_button.js.
- Regression verification: node verification/puppeteer_feature_settings_modal.js, node verification/puppeteer_feature_database_modal.js, node verification/puppeteer_feature_chessboard_modal.js, node verification/puppeteer_feature_modal_escape.js, node verification/puppeteer_feature_game_detail_modal.js, node verification/puppeteer_feature_open_lichess_link.js, node verification/puppeteer_feature_dashboard_cards_collapsible_move.js, node verification/puppeteer_feature_listudy_assets.js, node verification/puppeteer_motif_filters.js, node verification/puppeteer_practice_attempt.js, node verification/puppeteer_issue_enter_submit.js, node verification/puppeteer_issue_practice_progress.js.
- Tests run: make lint; cd client && ./node_modules/.bin/vitest run src/flows/DashboardFlow.test.tsx; make check (fails: pytest coverage 94.55% and tests/test_api_stats_motifs.py::test_stats_motifs_returns_schema).

Session summary (2026-02-10):
- Extracted practice button status resolution into dedicated helpers to simplify DashboardFlow state derivation.
- Before -> after map: DashboardFlow inline practiceButtonState useMemo -> buildPracticeButtonState helpers (PRACTICE_* constants + createPractice* helpers).
- Tests run: make check (before and after changes).

Session summary (2026-02-10):
- Practice modal board orientation now derives from the active FEN to keep side-to-move at the bottom.
- Updated game detail modal Puppeteer script to click rows directly; added practice orientation Puppeteer + integration verification scripts.
- Manual verification: node verification/puppeteer_feature_practice_orientation.js (feature-practice-orientation-2026-02-10.png); node verification/puppeteer_practice_attempt.js (dashboard-practice-attempt-grading.png); node verification/puppeteer_feature_chessboard_modal.js (feature-chessboard-modal-open-2026-02-09.png, feature-chessboard-modal-closed-2026-02-09.png); node verification/puppeteer_feature_game_detail_modal.js (feature-game-detail-modal-2026-02-08.png); regression re-runs for puppeteer_feature_listudy_assets.js, puppeteer_feature_dashboard_cards_collapsible_move.js, puppeteer_feature_settings_modal.js, puppeteer_feature_database_modal.js, puppeteer_feature_modal_escape.js, puppeteer_feature_open_lichess_link.js, puppeteer_feature_practice_button.js, puppeteer_feature_remove_initiative.js.
- Integration verification: node verification/integration_feature_practice_orientation.js.
- Tests run: make check.
